
CREATE INDEX idx_network_segments_nodes ON network_segments(from_node_id, to_node_id);
CREATE INDEX idx_network_segments_station ON network_segments(station_id);

-- Trigger ูุญุณุงุจ ุงูุทูู ุชููุงุฆูุงู
CREATE OR REPLACE FUNCTION calculate_segment_length()
RETURNS TRIGGER AS $$
DECLARE
    from_lat DECIMAL(10, 8);
    from_lng DECIMAL(11, 8);
    to_lat DECIMAL(10, 8);
    to_lng DECIMAL(11, 8);
BEGIN
    SELECT latitude, longitude INTO from_lat, from_lng
    FROM network_nodes WHERE id = NEW.from_node_id;
    
    SELECT latitude, longitude INTO to_lat, to_lng
    FROM network_nodes WHERE id = NEW.to_node_id;
    
    -- ุญุณุงุจ ุงููุณุงูุฉ ุจุงููุชุฑ (ุตูุบุฉ Haversine ูุจุณุทุฉ)
    NEW.calculated_length := 111320 * SQRT(
        POWER(to_lat - from_lat, 2) + 
        POWER((to_lng - from_lng) * COS(RADIANS((from_lat + to_lat) / 2)), 2)
    );
    
    -- ุงุณุชุฎุฏุงู ุงูุทูู ุงููุญุณูุจ ุฅุฐุง ูู ููุฏุฎู ูุฏููุงู
    IF NEW.length_meters IS NULL THEN
        NEW.length_meters := NEW.calculated_length;
    END IF;
    
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trg_calculate_segment_length
BEFORE INSERT OR UPDATE ON network_segments
FOR EACH ROW EXECUTE FUNCTION calculate_segment_length();
```

## 9.5 ุฌุฏูู ุฃุตูู ุงูุดุจูุฉ ุงููุฌูุนุฉ (network_assets)

```sql
CREATE TABLE network_assets (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    station_id UUID REFERENCES stations(id),
    
    -- ุงูุชุนุฑูู
    asset_code VARCHAR(30) UNIQUE NOT NULL,
    asset_name VARCHAR(200) NOT NULL,
    description TEXT,
    
    -- ุงููุทุงู ุงูุฌุบุฑุงูู
    coverage_area VARCHAR(200),  -- ูุซุงู: "ุดุจูุฉ ุชูุฒูุน ุญู ุงูุณูุงู"
    
    -- ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ
    total_nodes_cost DECIMAL(15, 2) DEFAULT 0,
    total_segments_cost DECIMAL(15, 2) DEFAULT 0,
    total_components_cost DECIMAL(15, 2) DEFAULT 0,
    total_cost DECIMAL(15, 2) GENERATED ALWAYS AS (
        total_nodes_cost + total_segments_cost + total_components_cost
    ) STORED,
    
    -- ุงูุฅููุงู
    useful_life_years INTEGER DEFAULT 20,
    depreciation_method VARCHAR(20) DEFAULT 'straight_line',
    accumulated_depreciation DECIMAL(15, 2) DEFAULT 0,
    book_value DECIMAL(15, 2),
    
    -- ุงูุญุงูุฉ
    status VARCHAR(20) DEFAULT 'active',
    commissioning_date DATE,
    
    -- ุงูุฑุจุท ุงููุญุงุณุจู
    gl_asset_account VARCHAR(20),
    gl_depreciation_account VARCHAR(20),
    capitalization_entry_id UUID,
    
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- ุฌุฏูู ุฑุจุท ุงูุนูุฏ ุจุฃุตู ุงูุดุจูุฉ
CREATE TABLE network_asset_nodes (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    network_asset_id UUID REFERENCES network_assets(id) ON DELETE CASCADE,
    node_id UUID REFERENCES network_nodes(id),
    added_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(network_asset_id, node_id)
);

-- ุฌุฏูู ุฑุจุท ุงูููุงุทุน ุจุฃุตู ุงูุดุจูุฉ
CREATE TABLE network_asset_segments (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    network_asset_id UUID REFERENCES network_assets(id) ON DELETE CASCADE,
    segment_id UUID REFERENCES network_segments(id),
    added_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(network_asset_id, segment_id)
);
```

## 9.6 ุดุงุดุฉ ุฃุฏุงุฉ ุฑุณู ุงูุดุจูุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐บ๏ธ ุฃุฏุงุฉ ุฑุณู ูุชูุซูู ุงูุดุจูุฉ                              [ุญูุธ] [ุชุตุฏูุฑ] [ุทุจุงุนุฉ] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                                 โ
โ  ุงูุฃุฏูุงุช: [๐ ููุทุฉ] [๐ ุฎุท] [โ๏ธ ุชุนุฏูู] [๐๏ธ ุญุฐู] [๐ ููุงุณ]                    โ
โ                                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ                                                                         โ   โ
โ  โ    โก ูุญุทุฉ ุงูุญุฏูุฏุฉ                                                     โ   โ
โ  โ       โ                                                                 โ   โ
โ  โ       โ (ABC 120mmยฒ)                                                   โ   โ
โ  โ       โ                                                                 โ   โ
โ  โ    โ ุนููุฏ-001                                                          โ   โ
โ  โ       โ                                                                 โ   โ
โ  โ       โ (ABC 120mmยฒ)                                                   โ   โ
โ  โ       โ                                                                 โ   โ
โ  โ    โ ุนููุฏ-002 โโโโโโโโโโโโโโ ูุญูู-001                                 โ   โ
โ  โ      / \        (ABC 70mmยฒ)    โ                                       โ   โ
โ  โ     /   \                      โ                                       โ   โ
โ  โ    /     \                  ๐ฆ ุทุจููู-001                               โ   โ
โ  โ   โ       โ                   / | \                                    โ   โ
โ  โ ุนููุฏ-003  ุนููุฏ-004          ๐ ๐ ๐                                   โ   โ
โ  โ   โ                                                                    โ   โ
โ  โ   โ (ABC 50mmยฒ)                                                       โ   โ
โ  โ   โ                                                                    โ   โ
โ  โ   โ ููุทุฉ ุชุนููู                                                        โ   โ
โ  โ                                                                         โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ ุงูุนูุตุฑ ุงููุญุฏุฏ: ุนููุฏ-002        โ  โ ุฎุตุงุฆุต ุงูููุทุน                        โ  โ
โ  โ                                 โ  โ                                     โ  โ
โ  โ ุงูููุน: ุนููุฏ                    โ  โ ูู: ุนููุฏ-001                        โ  โ
โ  โ ุงููุงุฏุฉ: ุฎุดุจ                    โ  โ ุฅูู: ุนููุฏ-002                       โ  โ
โ  โ ุงูุงุฑุชูุงุน: 12 ูุชุฑ               โ  โ ููุน ุงูููุจู: ABC                     โ  โ
โ  โ ุงููุงูู: ุงูุดุฑูุฉ                 โ  โ ุงูููุงุณ: 120 mmยฒ                     โ  โ
โ  โ ุชุงุฑูุฎ ุงูุชุฑููุจ: 2020-01-15     โ  โ ุงูุทูู: 180 ูุชุฑ                      โ  โ
โ  โ ุงูุญุงูุฉ: ุฌูุฏุฉ                   โ  โ ุงูุชูููุฉ: 90,000 ุฑูุงู               โ  โ
โ  โ                                 โ  โ                                     โ  โ
โ  โ [ุชุนุฏูู] [ุญุฐู] [ุตูุงูุฉ]         โ  โ [ุชุนุฏูู] [ุญุฐู]                       โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## 9.7 ุดุงุดุฉ ุชุฌููุน ุฃุตู ุงูุดุจูุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ฆ ุฅูุดุงุก ุฃุตู ุดุจูุฉ ุฌุฏูุฏ                                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                                 โ
โ  ุงุณู ุงูุฃุตู: [ุดุจูุฉ ุชูุฒูุน ุญู ุงูุณูุงู                              ]               โ
โ  ุงููุตู:     [ุดุจูุฉ ุงูุชูุฒูุน ูู ูุญูู-001 ุฅูู ุญู ุงูุณูุงู            ]               โ
โ                                                                                 โ
โ  ุงูุนูุงุตุฑ ุงููุฎุชุงุฑุฉ:                                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ โ ุนููุฏ-001 (ุฎุดุจุ 12ู) .......................... 200,000 ุฑูุงู          โ   โ
โ  โ โ ุนููุฏ-002 (ุฎุดุจุ 12ู) .......................... 200,000 ุฑูุงู          โ   โ
โ  โ โ ุนููุฏ-003 (ุญุฏูุฏุ 15ู) ......................... 350,000 ุฑูุงู          โ   โ
โ  โ โ ูุญูู-001 (250 KVA) ........................... 400,000 ุฑูุงู          โ   โ
โ  โ โ ุทุจููู-001 (ููุจุฑุ 20 ููุทุฉ) .................... 150,000 ุฑูุงู          โ   โ
โ  โ โ ููุทุน: ูุญุทุฉ โ ุนููุฏ-001 (500ูุ 120mmยฒ) ......... 250,000 ุฑูุงู          โ   โ
โ  โ โ ููุทุน: ุนููุฏ-001 โ ุนููุฏ-002 (180ูุ 120mmยฒ) ..... 90,000 ุฑูุงู           โ   โ
โ  โ โ ููุทุน: ุนููุฏ-002 โ ูุญูู-001 (100ูุ 70mmยฒ) ...... 40,000 ุฑูุงู           โ   โ
โ  โ โ ูุทุน ุดุฏ ูุชุนููู (15 ูุทุนุฉ) ...................... 45,000 ุฑูุงู           โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                                 โ
โ  ููุฎุต ุงูุชูููุฉ:                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ ุชูููุฉ ุงูุนูุฏ (ุฃุนูุฏุฉุ ูุญููุงุชุ ุทุจุงุจููู): .......... 1,300,000 ุฑูุงู        โ   โ
โ  โ ุชูููุฉ ุงูููุงุทุน (ููุงุจู): ......................... 380,000 ุฑูุงู          โ   โ
โ  โ ุชูููุฉ ุงูููููุงุช (ูุทุน ุดุฏุ ุนูุงุฒู): ................ 45,000 ุฑูุงู           โ   โ
โ  โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ   โ
โ  โ ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ: ............................. 1,725,000 ุฑูุงู        โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                                 โ
โ  ุงูุฅููุงู:                                                                      โ
โ  ุงูุนูุฑ ุงูุงูุชุฑุงุถู: [20] ุณูุฉ    ูุนุฏู ุงูุฅููุงู: 5%    ุงูุฅููุงู ุงูุณููู: 86,250 ุฑูุงู โ
โ                                                                                 โ
โ  [ุฅูุดุงุก ุงูุฃุตู ูููุฏ ุงูุฑุณููุฉ]  [ุญูุธ ููุณูุฏุฉ]  [ุฅูุบุงุก]                            โ
โ                                                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## 9.8 View: ุชุชุจุน ูุณุงุฑ ุงูููุฑุจุงุก (Power Flow Path)

```sql
-- View ูุชุชุจุน ูุณุงุฑ ุงูููุฑุจุงุก ูู ุงููุญุทุฉ ุฅูู ุฃู ููุทุฉ
CREATE OR REPLACE VIEW v_power_flow_paths AS
WITH RECURSIVE path_trace AS (
    -- ููุทุฉ ุงูุจุฏุงูุฉ: ุงููุญุทุงุช
    SELECT 
        n.id as node_id,
        n.node_code,
        n.node_type,
        n.station_id,
        ARRAY[n.id] as path,
        0 as depth,
        0::DECIMAL as total_length
    FROM network_nodes n
    WHERE n.node_type = 'substation'
    
    UNION ALL
    
    -- ุงูุชุชุจุน ุงูุชูุฑุงุฑู
    SELECT 
        n2.id,
        n2.node_code,
        n2.node_type,
        pt.station_id,
        pt.path || n2.id,
        pt.depth + 1,
        pt.total_length + COALESCE(s.length_meters, 0)
    FROM path_trace pt
    JOIN network_segments s ON s.from_node_id = pt.node_id
    JOIN network_nodes n2 ON n2.id = s.to_node_id
    WHERE NOT n2.id = ANY(pt.path)  -- ููุน ุงูุฏูุฑุงู
    AND pt.depth < 50  -- ุญุฏ ุฃูุตู ููุนูู
)
SELECT * FROM path_trace;
```

## 9.9 ุชุญููู ุงูุดุจูุฉ

### 9.9.1 ุชุญููู ุงูุฎูุงุถ ุงูุฌูุฏ

```sql
CREATE OR REPLACE FUNCTION analyze_voltage_drop(p_from_node UUID, p_to_node UUID)
RETURNS TABLE (
    segment_code VARCHAR,
    length_m DECIMAL,
    cable_size DECIMAL,
    resistance DECIMAL,
    voltage_drop_percent DECIMAL
) AS $$
BEGIN
    -- ุญุณุงุจ ุงูุฎูุงุถ ุงูุฌูุฏ ููู ููุทุน ูู ุงููุณุงุฑ
    RETURN QUERY
    WITH path AS (
        -- ุงุณุชุฎุฏุงู ุงูู recursive CTE ููุญุตูู ุนูู ุงููุณุงุฑ
        SELECT s.*, ROW_NUMBER() OVER() as seq
        FROM network_segments s
        -- ... ููุทู ุชุชุจุน ุงููุณุงุฑ
    )
    SELECT 
        p.segment_code,
        p.length_meters,
        p.cable_size_mm2,
        p.resistance_per_km * (p.length_meters / 1000),
        -- ุตูุบุฉ ูุจุณุทุฉ ูุงูุฎูุงุถ ุงูุฌูุฏ
        (p.resistance_per_km * (p.length_meters / 1000) * 100 / 400)::DECIMAL(5,2)
    FROM path p
    ORDER BY p.seq;
END;
$$ LANGUAGE plpgsql;
```

### 9.9.2 ุชุญููู ุงูุฃุญูุงู

```sql
CREATE OR REPLACE VIEW v_segment_load_analysis AS
SELECT 
    s.id as segment_id,
    s.segment_code,
    s.cable_size_mm2,
    s.max_current_amps,
    COUNT(DISTINCT cbc.customer_id) as connected_customers,
    SUM(c.contracted_load_kw) as total_load_kw,
    (SUM(c.contracted_load_kw) * 1000 / 400)::DECIMAL(10,2) as estimated_current_amps,
    CASE 
        WHEN (SUM(c.contracted_load_kw) * 1000 / 400) > s.max_current_amps * 0.8 THEN 'overloaded'
        WHEN (SUM(c.contracted_load_kw) * 1000 / 400) > s.max_current_amps * 0.6 THEN 'high'
        ELSE 'normal'
    END as load_status
FROM network_segments s
LEFT JOIN network_nodes n ON n.id = s.to_node_id AND n.node_type = 'distribution_box'
LEFT JOIN customer_box_connections cbc ON cbc.box_id = n.id
LEFT JOIN customers c ON c.id = cbc.customer_id
GROUP BY s.id, s.segment_code, s.cable_size_mm2, s.max_current_amps;
```

## 9.10 APIs ูุธุงู ุงูุฎุฑุงุฆุท ูุงูุชูุฃู ุงูุฑููู

| Method | Endpoint | ุงููุตู |
|--------|----------|-------|
| **ุงูููุงูุน** |
| GET | `/api/v1/geo/locations` | ุฌูุจ ุงูููุงูุน (ูุน ุชุตููุฉ) |
| POST | `/api/v1/geo/locations` | ุฅุถุงูุฉ ูููุน ุฌุฏูุฏ |
| PUT | `/api/v1/geo/locations/:id` | ุชุญุฏูุซ ูููุน |
| GET | `/api/v1/geo/nearby` | ุงูุจุญุซ ุจุงููุฑุจ ูู ููุทุฉ |
| **ุนูุฏ ุงูุดุจูุฉ** |
| GET | `/api/v1/network/nodes` | ุฌูุจ ุนูุฏ ุงูุดุจูุฉ |
| POST | `/api/v1/network/nodes` | ุฅุถุงูุฉ ุนูุฏุฉ ุฌุฏูุฏุฉ |
| PUT | `/api/v1/network/nodes/:id` | ุชุญุฏูุซ ุนูุฏุฉ |
| DELETE | `/api/v1/network/nodes/:id` | ุญุฐู ุนูุฏุฉ |
| GET | `/api/v1/network/nodes/:id/components` | ููููุงุช ุงูุนูุฏุฉ |
| **ููุงุทุน ุงูุดุจูุฉ** |
| GET | `/api/v1/network/segments` | ุฌูุจ ููุงุทุน ุงูุดุจูุฉ |
| POST | `/api/v1/network/segments` | ุฅุถุงูุฉ ููุทุน ุฌุฏูุฏ |
| PUT | `/api/v1/network/segments/:id` | ุชุญุฏูุซ ููุทุน |
| DELETE | `/api/v1/network/segments/:id` | ุญุฐู ููุทุน |
| **ุฃุตูู ุงูุดุจูุฉ** |
| GET | `/api/v1/network/assets` | ุฌูุจ ุฃุตูู ุงูุดุจูุฉ |
| POST | `/api/v1/network/assets` | ุฅูุดุงุก ุฃุตู ุดุจูุฉ |
| POST | `/api/v1/network/assets/:id/capitalize` | ุฑุณููุฉ ุฃุตู ุงูุดุจูุฉ |
| **ุงูุชุญููู** |
| GET | `/api/v1/network/trace/:nodeId` | ุชุชุจุน ูุณุงุฑ ุงูููุฑุจุงุก |
| GET | `/api/v1/network/voltage-drop` | ุชุญููู ุงูุฎูุงุถ ุงูุฌูุฏ |
| GET | `/api/v1/network/load-analysis` | ุชุญููู ุงูุฃุญูุงู |
| GET | `/api/v1/network/topology` | ุทูุจูููุฌูุง ุงูุดุจูุฉ |
| **ุงูุทุจุงููู ูุฎุทุท ุงูุชุฑุญูู** |
| GET | `/api/v1/geo/boxes` | ุฌูุจ ุงูุทุจุงููู |
| POST | `/api/v1/geo/boxes` | ุฅุถุงูุฉ ุทุจููู ุฌุฏูุฏ |
| GET | `/api/v1/geo/boxes/:id/customers` | ุงููุดุชุฑููู ุงููุฑุชุจุทูู ุจุทุจููู |
| GET | `/api/v1/migration/plans` | ุฌูุจ ุฎุทุท ุงูุชุฑุญูู |
| POST | `/api/v1/migration/plans` | ุฅูุดุงุก ุฎุทุฉ ุฌุฏูุฏุฉ |
| POST | `/api/v1/migration/plans/:id/approve` | ุงูููุงููุฉ ุนูู ุฎุทุฉ |
| POST | `/api/v1/migration/plans/:id/generate-work-orders` | ุฅูุดุงุก ุฃูุงูุฑ ุงูุนูู |

---

# 10๏ธโฃ ููุตุฉ ุงูุชุดุบูู ูุงููุฑุงูุจุฉ ุงูููุญุฏุฉ - ุบุฑูุฉ ุงูุชุญูู ุงููุฑูุฒูุฉ

> **ุงูุบุฑุถ:** ุฅูุดุงุก ูุงุฌูุฉ ูุฑูุฒูุฉ ุชุฌูุน ูู ุงูุจูุงูุงุช ูุงูุชุญูู ูู ููุงู ูุงุญุฏ - ูุธุงู SCADA ููุจุณูุท ูููุฎุตุต

## 10.1 ุงููุจุฏุฃ ุงูุฃุณุงุณู

```
ููุตุฉ ุงูุชุดุบูู ุงูููุญุฏุฉ:
โ
โโโ ุทุจูุฉ ุฏูุฌ ุงูุจูุงูุงุช ุงูุญูุฉ (Live Data Integration)
โ   โโโ DeepSea/ComAp (ุงููููุฏุงุช)
โ   โโโ Acrel ADW300 (ุนุฏุงุฏุงุช ุงููุฑุงูุจุฉ)
โ   โโโ Acrel ADL200 (ุนุฏุงุฏุงุช ุงููุดุชุฑููู)
โ
โโโ ููุญุฉ ุงูุชุญูู ุงูุฌุบุฑุงููุฉ (GIS Dashboard)
โ   โโโ ุงูุฎุฑูุทุฉ ุงูุชูุงุนููุฉ
โ   โโโ ุงูุจูุงูุงุช ุงูุญูุฉ (Data Overlay)
โ   โโโ ูุญุงูุงุฉ ุชุฏูู ุงูุทุงูุฉ
โ
โโโ ุฃุฏูุงุช ุงูุชุญูู ุงูุณุฑูุนุฉ
โ   โโโ ูุตู/ูุตู ุงููุดุชุฑููู
โ   โโโ ุงูุชุญูู ุจุงูููุงุทุน
โ   โโโ ุงูุชุญูู ุจุงููููุฏุงุช
โ
โโโ ุงูุฑูุงุจุท ูุน ุงูุฃูุธูุฉ ุงูุฃุฎุฑู
    โโโ ูุธุงู ุงูุฃุตูู
    โโโ ูุธุงู ุงูุชุฎุทูุท
    โโโ ูุธุงู ุงูููุชุฑุฉ
    โโโ ูุธุงู ุงููุฎุฒูู
```

## 10.2 ุชูุงูู ูุญุฏุงุช ุชุญูู ุงููููุฏุงุช (DeepSea/ComAp)

### ุฌุฏูู ุชูุงูู ุงููููุฏุงุช (generator_integrations)

```sql
CREATE TABLE generator_integrations (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    generator_id UUID REFERENCES generators(id),
    
    -- ููุน ูุญุฏุฉ ุงูุชุญูู
    controller_type VARCHAR(50) NOT NULL,  -- 'deepsea', 'comap', 'other'
    controller_model VARCHAR(100),          -- 'DSE8610', 'InteliGen', etc.
    
    -- ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู
    connection_type VARCHAR(30),            -- 'modbus_tcp', 'modbus_rtu', 'api'
    ip_address VARCHAR(45),
    port INTEGER,
    slave_id INTEGER,
    api_endpoint VARCHAR(255),
    api_key VARCHAR(255),
    
    -- ุญุงูุฉ ุงูุงุชุตุงู
    is_connected BOOLEAN DEFAULT FALSE,
    last_connection TIMESTAMP,
    connection_errors INTEGER DEFAULT 0,
    
    -- ุฅุนุฏุงุฏุงุช ุงููุฑุงุกุฉ
    polling_interval_seconds INTEGER DEFAULT 5,
    
    created_at TIMESTAMP DEFAULT NOW()
);
```

### ุฌุฏูู ูุฑุงุกุงุช ุงููููุฏุงุช ุงูุญูุฉ (generator_live_readings)

```sql
CREATE TABLE generator_live_readings (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    generator_id UUID REFERENCES generators(id),
    
    -- ุงูุจูุงูุงุช ุงูููุฑุจุงุฆูุฉ
    power_kw DECIMAL(10,2),           -- ุงูุฅูุชุงุฌ ุงูุญุงูู
    voltage_l1 DECIMAL(10,2),
    voltage_l2 DECIMAL(10,2),